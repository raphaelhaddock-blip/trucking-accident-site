# 18-Wheeler Accident Site - Sanity CMS Schemas

## Schema Overview

| Schema | Purpose | Count |
|--------|---------|-------|
| accidentPage | 20 accident type pages | 20 |
| statePage | State-level pages | 50 |
| cityPage | City-level pages | 100+ |
| blogPost | News/content posts | Unlimited |
| faqItem | Reusable FAQ object | Embedded |
| siteSettings | Global settings | 1 |

---

## accidentPage Schema

```typescript
// sanity/schemas/accidentPage.ts

import { defineType, defineField } from 'sanity'

export default defineType({
  name: 'accidentPage',
  title: 'Accident Type Page',
  type: 'document',
  fields: [
    defineField({
      name: 'title',
      title: 'Title',
      type: 'string',
      description: 'e.g., "Jackknife Truck Accidents"',
      validation: Rule => Rule.required().max(100)
    }),
    defineField({
      name: 'slug',
      title: 'Slug',
      type: 'slug',
      options: {
        source: 'title',
        maxLength: 60
      },
      validation: Rule => Rule.required()
    }),
    defineField({
      name: 'metaTitle',
      title: 'Meta Title',
      type: 'string',
      description: 'SEO title (max 60 chars)',
      validation: Rule => Rule.required().max(60)
    }),
    defineField({
      name: 'metaDescription',
      title: 'Meta Description',
      type: 'text',
      rows: 3,
      description: 'SEO description (120-160 chars)',
      validation: Rule => Rule.required().min(120).max(160)
    }),
    defineField({
      name: 'h1',
      title: 'H1 Heading',
      type: 'string',
      description: 'Main page heading (50-70 chars)',
      validation: Rule => Rule.required().max(70)
    }),
    defineField({
      name: 'overview',
      title: 'Overview',
      type: 'array',
      of: [{ type: 'block' }],
      description: 'What this accident type is'
    }),
    defineField({
      name: 'causes',
      title: 'Common Causes',
      type: 'array',
      of: [{ type: 'block' }],
      description: 'What causes this type of accident'
    }),
    defineField({
      name: 'fmcsaRegulations',
      title: 'FMCSA Regulations',
      type: 'array',
      of: [{ type: 'block' }],
      description: 'Relevant federal regulations'
    }),
    defineField({
      name: 'injuries',
      title: 'Typical Injuries',
      type: 'array',
      of: [{ type: 'block' }],
      description: 'Common injuries from this accident type'
    }),
    defineField({
      name: 'liability',
      title: 'Liability & Defendants',
      type: 'array',
      of: [{ type: 'block' }],
      description: 'Who can be held liable'
    }),
    defineField({
      name: 'evidence',
      title: 'Evidence & Investigation',
      type: 'array',
      of: [{ type: 'block' }],
      description: 'Evidence to preserve and investigate'
    }),
    defineField({
      name: 'compensation',
      title: 'Compensation',
      type: 'array',
      of: [{ type: 'block' }],
      description: 'Types of damages available'
    }),
    defineField({
      name: 'whatToDo',
      title: 'What To Do After',
      type: 'array',
      of: [{ type: 'block' }],
      description: 'Steps victims should take'
    }),
    defineField({
      name: 'faqs',
      title: 'FAQs',
      type: 'array',
      of: [{ type: 'faqItem' }],
      description: 'Minimum 5 unique FAQs',
      validation: Rule => Rule.min(5)
    }),
    defineField({
      name: 'relatedAccidentTypes',
      title: 'Related Accident Types',
      type: 'array',
      of: [{
        type: 'reference',
        to: [{ type: 'accidentPage' }]
      }],
      description: 'Link to 2-3 related accident types'
    }),
    defineField({
      name: 'status',
      title: 'Status',
      type: 'string',
      options: {
        list: [
          { title: 'Draft', value: 'draft' },
          { title: 'Published', value: 'published' }
        ]
      },
      initialValue: 'draft'
    }),
    defineField({
      name: 'generatedByAI',
      title: 'Generated by AI',
      type: 'boolean',
      initialValue: false
    }),
    defineField({
      name: 'generatedAt',
      title: 'Generated At',
      type: 'datetime'
    }),
    defineField({
      name: 'wordCount',
      title: 'Word Count',
      type: 'number',
      description: 'Auto-calculated, minimum 3000'
    })
  ],
  preview: {
    select: {
      title: 'title',
      status: 'status'
    },
    prepare({ title, status }) {
      return {
        title,
        subtitle: status === 'published' ? 'âœ… Published' : 'ðŸ“ Draft'
      }
    }
  }
})
```

---

## statePage Schema

```typescript
// sanity/schemas/statePage.ts

import { defineType, defineField } from 'sanity'

export default defineType({
  name: 'statePage',
  title: 'State Page',
  type: 'document',
  fields: [
    defineField({
      name: 'title',
      title: 'Title',
      type: 'string',
      description: 'e.g., "Texas Truck Accident Lawyer"',
      validation: Rule => Rule.required()
    }),
    defineField({
      name: 'slug',
      title: 'Slug',
      type: 'slug',
      options: {
        source: 'stateName',
        slugify: input => input.toLowerCase().replace(/\s+/g, '-')
      },
      validation: Rule => Rule.required()
    }),
    defineField({
      name: 'stateName',
      title: 'State Name',
      type: 'string',
      description: 'Full state name (e.g., "Texas")',
      validation: Rule => Rule.required()
    }),
    defineField({
      name: 'stateCode',
      title: 'State Code',
      type: 'string',
      description: 'Two-letter code (e.g., "TX")',
      validation: Rule => Rule.required().length(2)
    }),
    defineField({
      name: 'metaTitle',
      title: 'Meta Title',
      type: 'string',
      validation: Rule => Rule.required().max(60)
    }),
    defineField({
      name: 'metaDescription',
      title: 'Meta Description',
      type: 'text',
      rows: 3,
      validation: Rule => Rule.required().min(120).max(160)
    }),
    defineField({
      name: 'h1',
      title: 'H1 Heading',
      type: 'string',
      validation: Rule => Rule.required().max(70)
    }),
    defineField({
      name: 'overview',
      title: 'State Overview',
      type: 'array',
      of: [{ type: 'block' }],
      description: 'Trucking in this state'
    }),
    defineField({
      name: 'majorCorridors',
      title: 'Major Trucking Corridors',
      type: 'array',
      of: [{ type: 'string' }],
      description: 'e.g., I-10, I-35, I-45'
    }),
    defineField({
      name: 'stateLaws',
      title: 'State-Specific Laws',
      type: 'array',
      of: [{ type: 'block' }],
      description: 'State trucking regulations'
    }),
    defineField({
      name: 'statuteOfLimitations',
      title: 'Statute of Limitations',
      type: 'string',
      description: 'e.g., "2 years"'
    }),
    defineField({
      name: 'comparativeNegligence',
      title: 'Comparative Negligence Rule',
      type: 'string',
      options: {
        list: [
          { title: 'Pure Comparative', value: 'pure' },
          { title: 'Modified 50%', value: 'modified50' },
          { title: 'Modified 51%', value: 'modified51' },
          { title: 'Contributory', value: 'contributory' }
        ]
      }
    }),
    defineField({
      name: 'comparativeNegligenceExplainer',
      title: 'Comparative Negligence Explanation',
      type: 'array',
      of: [{ type: 'block' }]
    }),
    defineField({
      name: 'courtInfo',
      title: 'Court System Information',
      type: 'array',
      of: [{ type: 'block' }]
    }),
    defineField({
      name: 'faqs',
      title: 'FAQs',
      type: 'array',
      of: [{ type: 'faqItem' }],
      validation: Rule => Rule.min(5)
    }),
    defineField({
      name: 'neighboringStates',
      title: 'Neighboring States',
      type: 'array',
      of: [{
        type: 'reference',
        to: [{ type: 'statePage' }]
      }]
    }),
    defineField({
      name: 'status',
      title: 'Status',
      type: 'string',
      options: {
        list: [
          { title: 'Draft', value: 'draft' },
          { title: 'Published', value: 'published' }
        ]
      },
      initialValue: 'draft'
    }),
    defineField({
      name: 'generatedByAI',
      title: 'Generated by AI',
      type: 'boolean',
      initialValue: false
    }),
    defineField({
      name: 'wordCount',
      title: 'Word Count',
      type: 'number'
    })
  ],
  preview: {
    select: {
      title: 'stateName',
      status: 'status'
    },
    prepare({ title, status }) {
      return {
        title,
        subtitle: status === 'published' ? 'âœ… Published' : 'ðŸ“ Draft'
      }
    }
  }
})
```

---

## cityPage Schema

```typescript
// sanity/schemas/cityPage.ts

import { defineType, defineField } from 'sanity'

export default defineType({
  name: 'cityPage',
  title: 'City Page',
  type: 'document',
  fields: [
    defineField({
      name: 'title',
      title: 'Title',
      type: 'string',
      description: 'e.g., "Houston 18-Wheeler Accident Attorney"',
      validation: Rule => Rule.required()
    }),
    defineField({
      name: 'slug',
      title: 'Slug',
      type: 'slug',
      options: { source: 'cityName' },
      validation: Rule => Rule.required()
    }),
    defineField({
      name: 'cityName',
      title: 'City Name',
      type: 'string',
      validation: Rule => Rule.required()
    }),
    defineField({
      name: 'state',
      title: 'Parent State',
      type: 'reference',
      to: [{ type: 'statePage' }],
      validation: Rule => Rule.required()
    }),
    defineField({
      name: 'metaTitle',
      title: 'Meta Title',
      type: 'string',
      validation: Rule => Rule.required().max(60)
    }),
    defineField({
      name: 'metaDescription',
      title: 'Meta Description',
      type: 'text',
      rows: 3,
      validation: Rule => Rule.required().min(120).max(160)
    }),
    defineField({
      name: 'content',
      title: 'Content',
      type: 'array',
      of: [{ type: 'block' }]
    }),
    defineField({
      name: 'localCorridors',
      title: 'Local Highways/Corridors',
      type: 'array',
      of: [{ type: 'string' }]
    }),
    defineField({
      name: 'faqs',
      title: 'FAQs',
      type: 'array',
      of: [{ type: 'faqItem' }],
      validation: Rule => Rule.min(3)
    }),
    defineField({
      name: 'status',
      title: 'Status',
      type: 'string',
      options: {
        list: [
          { title: 'Draft', value: 'draft' },
          { title: 'Published', value: 'published' }
        ]
      },
      initialValue: 'draft'
    }),
    defineField({
      name: 'generatedByAI',
      title: 'Generated by AI',
      type: 'boolean',
      initialValue: false
    })
  ]
})
```

---

## blogPost Schema

```typescript
// sanity/schemas/blogPost.ts

import { defineType, defineField } from 'sanity'

export default defineType({
  name: 'blogPost',
  title: 'Blog Post',
  type: 'document',
  fields: [
    defineField({
      name: 'title',
      title: 'Title',
      type: 'string',
      validation: Rule => Rule.required().max(100)
    }),
    defineField({
      name: 'slug',
      title: 'Slug',
      type: 'slug',
      options: {
        source: 'title',
        maxLength: 80
      },
      validation: Rule => Rule.required()
    }),
    defineField({
      name: 'metaTitle',
      title: 'Meta Title',
      type: 'string',
      validation: Rule => Rule.required().max(60)
    }),
    defineField({
      name: 'metaDescription',
      title: 'Meta Description',
      type: 'text',
      rows: 3,
      validation: Rule => Rule.required().min(120).max(160)
    }),
    defineField({
      name: 'publishedAt',
      title: 'Published At',
      type: 'datetime',
      validation: Rule => Rule.required()
    }),
    defineField({
      name: 'content',
      title: 'Content',
      type: 'array',
      of: [{ type: 'block' }]
    }),
    defineField({
      name: 'faqs',
      title: 'FAQs',
      type: 'array',
      of: [{ type: 'faqItem' }],
      validation: Rule => Rule.min(3)
    }),
    defineField({
      name: 'relatedAccidentTypes',
      title: 'Related Accident Types',
      type: 'array',
      of: [{
        type: 'reference',
        to: [{ type: 'accidentPage' }]
      }]
    }),
    defineField({
      name: 'relatedStates',
      title: 'Related States',
      type: 'array',
      of: [{
        type: 'reference',
        to: [{ type: 'statePage' }]
      }]
    }),
    defineField({
      name: 'newsSource',
      title: 'News Source',
      type: 'object',
      fields: [
        { name: 'title', type: 'string', title: 'Source Title' },
        { name: 'url', type: 'url', title: 'Source URL' },
        { name: 'publishedAt', type: 'datetime', title: 'Source Published Date' }
      ]
    }),
    defineField({
      name: 'status',
      title: 'Status',
      type: 'string',
      options: {
        list: [
          { title: 'Draft', value: 'draft' },
          { title: 'Published', value: 'published' }
        ]
      },
      initialValue: 'draft'
    }),
    defineField({
      name: 'generatedByAI',
      title: 'Generated by AI',
      type: 'boolean',
      initialValue: false
    }),
    defineField({
      name: 'generatedAt',
      title: 'Generated At',
      type: 'datetime'
    })
  ],
  orderings: [
    {
      title: 'Published Date, New',
      name: 'publishedAtDesc',
      by: [{ field: 'publishedAt', direction: 'desc' }]
    }
  ],
  preview: {
    select: {
      title: 'title',
      date: 'publishedAt',
      status: 'status'
    },
    prepare({ title, date, status }) {
      return {
        title,
        subtitle: `${status === 'published' ? 'âœ…' : 'ðŸ“'} ${date ? new Date(date).toLocaleDateString() : 'No date'}`
      }
    }
  }
})
```

---

## faqItem Schema (Object)

```typescript
// sanity/schemas/faqItem.ts

import { defineType, defineField } from 'sanity'

export default defineType({
  name: 'faqItem',
  title: 'FAQ Item',
  type: 'object',
  fields: [
    defineField({
      name: 'question',
      title: 'Question',
      type: 'string',
      validation: Rule => Rule.required()
    }),
    defineField({
      name: 'answer',
      title: 'Answer',
      type: 'text',
      rows: 4,
      validation: Rule => Rule.required()
    })
  ],
  preview: {
    select: {
      title: 'question'
    }
  }
})
```

---

## siteSettings Schema

```typescript
// sanity/schemas/siteSettings.ts

import { defineType, defineField } from 'sanity'

export default defineType({
  name: 'siteSettings',
  title: 'Site Settings',
  type: 'document',
  fields: [
    defineField({
      name: 'siteName',
      title: 'Site Name',
      type: 'string'
    }),
    defineField({
      name: 'siteUrl',
      title: 'Site URL',
      type: 'url'
    }),
    defineField({
      name: 'firmName',
      title: 'Firm Name',
      type: 'string',
      description: 'For branding and schema'
    }),
    defineField({
      name: 'phone',
      title: 'Phone Number',
      type: 'string',
      description: 'Main CTA phone'
    }),
    defineField({
      name: 'email',
      title: 'Email',
      type: 'string'
    }),
    defineField({
      name: 'defaultMetaTitle',
      title: 'Default Meta Title',
      type: 'string'
    }),
    defineField({
      name: 'defaultMetaDescription',
      title: 'Default Meta Description',
      type: 'text'
    })
  ]
})
```

---

## Schema Index

```typescript
// sanity/schemas/index.ts

import accidentPage from './accidentPage'
import statePage from './statePage'
import cityPage from './cityPage'
import blogPost from './blogPost'
import faqItem from './faqItem'
import siteSettings from './siteSettings'

export const schemaTypes = [
  accidentPage,
  statePage,
  cityPage,
  blogPost,
  faqItem,
  siteSettings
]
```

---

## Sanity Configuration

```typescript
// sanity.config.ts

import { defineConfig } from 'sanity'
import { deskTool } from 'sanity/desk'
import { schemaTypes } from './sanity/schemas'

export default defineConfig({
  name: 'trucking-accident-site',
  title: '18-Wheeler Accident Site',
  
  projectId: 'YOUR_PROJECT_ID',
  dataset: 'production',
  
  plugins: [deskTool()],
  
  schema: {
    types: schemaTypes
  },
  
  document: {
    // Customize desk structure if needed
  }
})
```

---

## Environment Variables

```bash
# .env.local

# Sanity
NEXT_PUBLIC_SANITY_PROJECT_ID="your-project-id"
NEXT_PUBLIC_SANITY_DATASET="production"
SANITY_API_TOKEN="your-write-token"

# Claude API
ANTHROPIC_API_KEY="sk-ant-api03-..."

# NewsAPI
NEWSAPI_KEY="your-newsapi-key"

# Cron Security
CRON_SECRET="generate-with-openssl-rand-hex-32"
```
